language: java
jdk:
  - oraclejdk8
  - oraclejdk7
  - openjdk7
  - openjdk6
before_script: unset GEM_PATH GEM_HOME JRUBY_OPTS
install: ./gradlew assemble
script: ./gradlew -S check && bash test-asciidoctor-upstream.sh
after_success: if [ "${TRAVIS_BRANCH}" = "asciidoctorj-1.6.0" -a "${TRAVIS_PULL_REQUEST}" = "false" -a "${TRAVIS_JDK_VERSION}" = "oraclejdk8" ]; then ./gradlew clean build artifactoryPublish -x test ; fi
notifications:
  email: false
  irc:
    channels:
      - "irc.freenode.org#asciidoctor"
env:
  - secure: "wRlCGOBxIeRE7M0yAZ1LhKGyZ0nhzj4CkF9wiA6Rc2vXONIL5M9NMkaExmrtui1gXffixyRlGYeas6Q6awTvBZ5uKiNnt530BuzrMFN1kIhAdyXhcuzvO5seOwKyyyyLEFaWRFqqWDu9bSeZvzIoUXCpC+q47CdMzWExEdbE7eE="
  - secure: "poMdVYonDHXsmILnF6ZIub11xgQz219J2F6HbEP2dlUpEtiDhrg+NxorPaU5K+r0gA8YoqlISQLyuVoEReOgjb+Xv++1iaD3ryU5gAFGPsfnK8cWP4praWS3zD0UbbkPaNDP85LtpUB234mMQJ9HZHEeDGMWnd9kH8Ii8JdAME0="
